@import "../../common";

@function localVar($key, $default) {
    @return globalVar(thumbnails_ + $key, $default);
}

.yarl__thumbnails {
    display: flex;

    &_top, &_bottom {
        flex-flow: column nowrap;
    }

    &_top &_track, &_bottom &_track {
        flex-flow: row nowrap;
    }

    &_start, &_end {
        flex-flow: row nowrap;
    }

    &_start &_track, &_end &_track {
        flex-flow: column nowrap;
    }

    &_wrapper {
        flex-grow: 1;
        position: relative;
    }

    &_container {
        background-color: localVar(container_background_color, $color-backdrop);
        padding: localVar(container_padding, 16px);
        position: relative;
        overflow: hidden;
        z-index: 0;
        user-select: none;
        -webkit-touch-callout: none;

        &::before, &::after {
            content: "";
            position: absolute;
            z-index: 1;
        }
    }

    &_top &_container::before, &_bottom &_container::before {
        left: 0;
        background: linear-gradient(to left, transparent, $color-backdrop);
    }

    &_top &_container::after, &_bottom &_container::after {
        right: 0;
        background: linear-gradient(to right, transparent, $color-backdrop);
    }

    &_top &_container::before, &_top &_container::after, &_bottom &_container::before, &_bottom &_container::after {
        top: 0;
        bottom: 0;
        width: 60px;
    }

    &_start &_container::before, &_end &_container::before {
        top: 0;
        background: linear-gradient(to top, transparent, $color-backdrop);
    }

    &_start &_container::after, &_end &_container::after {
        bottom: 0;
        background: linear-gradient(to bottom, transparent, $color-backdrop);
    }

    &_start &_container::before, &_start &_container::after, &_end &_container::before, &_end &_container::after {
        left: 0;
        right: 0;
        height: 60px;
    }

    &_track {
        display: flex;
        gap: localVar(thumbnail_gap, 16px);
    }

    &_thumbnail {
        cursor: pointer;
        appearance: none;
        background: localVar(thumbnail_background, $color-black);
        border: localVar(thumbnail_border, 1px solid $color-button);
        border-radius: localVar(thumbnail_border_radius, 4px);
        -webkit-tap-highlight-color: transparent;
        flex-shrink: 0;
        position: relative;
        overflow: hidden;
        padding: localVar(thumbnail_padding, 4px);

        width: localVar(thumbnail_width, 120px);
        height: localVar(thumbnail_height, 80px);
        box-sizing: content-box;

        &_active {
            border-color: localVar(thumbnail_active_border_color, $color-button-active);
        }

        &_fadein {
            opacity: 0;
            animation: yarl__thumbnails_thumbnail_fadein localVar(thumbnail_fadein_duration, .5s) ease-in-out localVar(thumbnail_fadein_delay, 0s) forwards;
        }

        &_fadeout {
            animation: yarl__thumbnails_thumbnail_fadeout localVar(thumbnail_fadeout_duration, .5s) ease-in-out localVar(thumbnail_fadeout_delay, 0s) forwards;
            cursor: unset;
        }

        &_placeholder {
            visibility: hidden;
            cursor: unset;
        }
    }

    &_thumbnail_icon {
        color: localVar(thumbnail_icon_color, $color-button);
        filter: localVar(thumbnail_icon_filter, drop-shadow(2px 2px 2px rgba($color-black, .8)));
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate3d(-50%, -50%, 0);
        width: localVar(thumbnail_icon_size, 32px);
        height: localVar(thumbnail_icon_size, 32px);
    }

    &_contain_image {
        object-fit: contain;
    }
}

@keyframes yarl__thumbnails_thumbnail_fadein {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes yarl__thumbnails_thumbnail_fadeout {
    from {
        opacity: 1
    }
    to {
        opacity: 0;
    }
}
